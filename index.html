<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIKKI Exchange</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap');

:root {
    --primary-color: #2F9535;
    --secondary-color: #57AB5C;
    --bg-color: #000000;
    --text-color: #FFFFFF;
    --input-bg: linear-gradient(0.25turn, var(--secondary-color), #234525);
    --border-radius: 50px;
}

body {
    font-family: 'Montserrat', sans-serif;
    margin: 0;
    background-color: var(--bg-color);
    color: var(--text-color);
}

.container {
    max-width: 400px;
    margin: 0 auto;
    background-image: url("img/mikk.png");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: 70px -20px;
    padding: 20px;
}

.rate-block {
    border-radius: 15px;
    padding: 15px;
    margin-bottom: 25px;
    margin-left: 30px;
}

.rate-label {
    font-size: 14px;
    margin-bottom: 10px;
    text-decoration: underline;
}

.rate-info {
    display: flex;
    gap: 10px;
    align-items: center;
}

.rate-currency {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.rate-arrow {
    font-size: 20px;
}

.rate-value {
    font-size: 18px;
    font-weight: 500;
    color: #2DC504;
    padding: 5px 10px;
    border-radius: 5px;
}

.rate-currency small {
    font-size: 12px;
    font-weight: 300;
}

.exchange-block {
    border-radius: 15px;
    padding: 20px;
}

.exchange-label {
    font-size: 18px;
    margin-bottom: 10px;
    margin-left: 30px;
    font-weight: 300;
}

.exchange-input {
    background: var(--input-bg);
    padding: 10px 10px 10px 30px;
    border-radius: var(--border-radius);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.exchange-input input {
    border: none;
    background: transparent;
    font-size: 24px;
    outline: none;
    width: 60%;
    color: var(--text-color);
}

.exchange-input input::placeholder {
    font-family: 'Montserrat', sans-serif;
    color: var(--text-color);
    font-weight: 700;
}

.currency-select {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: 15px;
    border-radius: var(--border-radius);
    background-color: var(--primary-color);
}

.currency-logo {
    width: 24px;
    height: 24px;
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    background-color: var(--text-color);
    border-radius: 50%;
}

.currency-select::after {
    content: '‚ñº';
    margin-left: 10px;
    font-size: 12px;
}

#exchangeForm {
    position: relative;
}

.swap-block {
    display: flex;
    justify-content: flex-end;
    position: absolute;
    right: 55px;
    top: 140px;
}

.swap-button {
    background-color: var(--primary-color);
    color: var(--text-color);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.manager-check {
    margin-top: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.manager-check input {
    margin-right: 10px;
}

.currency-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(255, 255, 255, 0.4);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.currency-modal.show {
    opacity: 1;
}

.modal-content {
    position: relative;
    background-color: var(--bg-color);
    margin: 15% auto;
    padding: 20px;
    max-width: 500px;
    border-radius: 10px;
    transform: scale(0.7);
    opacity: 0;
    transition: all 0.3s ease;
    min-height: 400px;
    display: flex;
    flex-direction: column;
}

.currency-modal.show .modal-content {
    transform: scale(1);
    opacity: 1;
}

.close {
    color: #aaa;
    font-size: 28px;
    font-weight: bold;
    transition: all 0.3s ease;
    cursor: pointer;
    padding: 0 10px;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.currency-filter {
    width: 80%;
    display: flex;
    gap: 5px;
}

.filter-button {
    padding: 8px;
    border: none;
    background-color: #f0f0f0;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.filter-button.active {
    background-color: var(--primary-color);
    color: var(--text-color);
}

.currency-list {
    height: 300px;
    overflow-y: auto;
    flex-grow: 1;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) var(--primary-color);
}

.currency-list::-webkit-scrollbar {
    width: 8px;
}

.currency-list::-webkit-scrollbar-track {
    background: #f0f0f0;
}

.currency-list::-webkit-scrollbar-thumb {
    background-color: var(--primary-color);
    border-radius: 20px;
    border: 2px solid #f0f0f0;
}

.currency-item {
    display: flex;
    align-items: center;
    padding: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.currency-item:hover {
    background-color: #f0f0f0;
}

.currency-label {
    width: 30%;
    background-color: #e0e0e0;
    padding: 5px;
    border-radius: 5px;
    display: flex;
    align-items: center;
    margin-right: 10px;
}

.currency-tech-name {
    font-size: 12px;
}

.currency-name {
    width: 70%;
    font-size: 14px;
}

.minimum-amount {
    color: red;
    margin-top: 10px;
    text-align: center;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn 0.5s ease forwards;
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

.pulse {
    animation: pulse 1s infinite;
}

@keyframes rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(180deg);
    }
}

.swap-button.rotate {
    animation: rotate 0.3s ease-in-out;
}

/* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
@media screen and (max-width: 480px) {
    .container {
        max-width: 100%;
        padding: 10px;
        background-position: center -20px;
    }

    .rate-block {
        margin-left: 0;
    }

    .exchange-label {
        margin-left: 10px;
    }

    .exchange-input {
        padding: 10px;
    }

    .exchange-input input {
        font-size: 20px;
    }

    .currency-select {
        padding: 10px;
    }

    .swap-block {
        right: 20px;
        top: 130px;
    }

    .modal-content {
        width: 90%;
        margin: 10% auto;
    }

    .currency-filter {
        width: 100%;
        flex-wrap: wrap;
        justify-content: center;
    }

    .filter-button {
        font-size: 12px;
        padding: 6px;
    }
}

@media screen and (max-width: 320px) {
    .exchange-input input {
        font-size: 18px;
    }

    .currency-select {
        padding: 8px;
    }

    .currency-logo {
        width: 20px;
        height: 20px;
        font-size: 16px;
    }

    .swap-block {
        right: 10px;
        top: 120px;
    }

    .swap-button {
        width: 30px;
        height: 30px;
        font-size: 16px;
    }
}
    </style>
</head>

<body>
    <div class="container fade-in">
        <div class="rate-block">
            <div class="rate-label">–ö—É—Ä—Å</div>
            <div class="rate-info">
                <div class="rate-currency">
                    <small id="fromCurrencyInfo"></small>
                    <span id="fromCurrencyLabel">AED</span>
                </div>
                <div class="rate-arrow">‚Üí</div>
                <div class="rate-currency">
                    <small id="toCurrencyInfo"></small>
                    <span id="toCurrencyLabel">USD</span>
                </div>
                <div class="rate-value pulse" id="currentRate">0.27 $</div>
            </div>
        </div>
        <form id="exchangeForm">
            <div class="exchange-block">
                <div class="exchange-label">–ß—Ç–æ –æ—Ç–¥–∞–µ—Ç–µ?</div>
                <div class="exchange-input">
                    <input type="number" id="fromAmount" placeholder="1000" inputmode="decimal">
                    <div class="currency-select" id="fromCurrency" onclick="openCurrencyModal('from')">
                        <div class="currency-logo">üá¶üá™</div>
                        <span>AED</span>
                    </div>
                </div>
            </div>
            <div class="swap-block">
                <button type="button" class="swap-button" onclick="swapCurrencies()">‚áÖ</button>
            </div>
            <div class="exchange-block">
                <div class="exchange-label">–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ?</div>
                <div class="exchange-input">
                    <input type="number" id="toAmount" placeholder="0" readonly>
                    <div class="currency-select" id="toCurrency" onclick="openCurrencyModal('to')">
                        <div class="currency-logo">üíµ</div>
                        <span>USD</span>
                    </div>
                </div>
            </div>
            <div class="minimum-amount" id="minimumAmountMessage"></div>
            <div class="manager-check">
                <input type="checkbox" id="managerCheck">
                <label for="managerCheck">–ú–µ–Ω–µ–¥–∂–µ—Ä —á–µ–∫</label>
            </div>
        </form>
    </div>

    <div id="currencyModal" class="currency-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="currency-filter">
                    <button class="filter-button active" onclick="filterCurrencies('all')">–í—Å–µ</button>
                    <button class="filter-button" onclick="filterCurrencies('crypto')">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</button>
                    <button class="filter-button" onclick="filterCurrencies('bank')">–ë–∞–Ω–∫–∏</button>
                    <button class="filter-button" onclick="filterCurrencies('cash')">–ù–∞–ª–∏—á–Ω—ã–µ</button>
                </div>
                <span class="close" onclick="closeCurrencyModal()">&times;</span>
            </div>
            <div class="currency-list" id="currencyList"></div>
        </div>
    </div>
</body>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    let tg = window.Telegram.WebApp;

    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let currentFromCurrency = 'CASHAED';
    let currentToCurrency = 'CASHUSD';

    // –°–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç
    const currencies = [
        { code: 'CASHAED', name: '–ù–∞–ª–∏—á–Ω—ã–µ –¥–∏—Ä—Ö–∞–º—ã –≤ –î—É–±–∞–π', shortName: 'AED', type: 'cash', logo: 'üá¶üá™', symbol: 'ÿØ.ÿ•', decimals: 2, minAmount: 100 },
        { code: 'CASHUSD', name: '–ù–∞–ª–∏—á–Ω—ã–µ –¥–æ–ª–ª–∞—Ä—ã –≤ –î—É–±–∞–π', shortName: 'USD', type: 'cash', logo: 'üá∫üá∏', symbol: '$', decimals: 2, minAmount: 50 },
        { code: 'CARDRUB', name: '–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä—É–±–ª—å', shortName: 'RUB', type: 'bank', logo: 'üá∑üá∫', symbol: '‚ÇΩ', decimals: 2, minAmount: 1000 },
        { code: 'CASHRUB', name: '–ù–∞–ª–∏—á–Ω—ã–µ —Ä—É–±–ª–∏', shortName: 'RUB', type: 'cash', logo: 'üá∑üá∫', symbol: '‚ÇΩ', decimals: 2, city: '–ß–µ–ª—è–±–∏–Ω—Å–∫', minAmount: 1000 },
        { code: 'USDT', name: 'USDT', shortName: 'USDT', type: 'crypto', logo: 'üí∞', symbol: '‚ÇÆ', decimals: 2, minAmount: 10 },
    ];

    // –ö—É—Ä—Å—ã –æ–±–º–µ–Ω–∞ (–ø—Ä–∏–º–µ—Ä, –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞)
    const exchangeRates = {};
    currencies.forEach((from, i) => {
        exchangeRates[from.code] = {};
        currencies.slice(i + 1).forEach(to => {
            const rate = Math.random() * 100; // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∫—É—Ä—Å
            exchangeRates[from.code][to.code] = rate;
            exchangeRates[to.code] = exchangeRates[to.code] || {};
            exchangeRates[to.code][from.code] = 1 / rate;
        });
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –æ–±–º–µ–Ω–∞
    function getExchangeRate(from, to) {
        if (from === to) return 1;
        return exchangeRates[from][to] || 1 / exchangeRates[to][from];
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    function initApp() {
        tg.expand();
        updateCurrencyDisplay();
        updateExchangeRate();
        document.getElementById('fromAmount').addEventListener('input', updateResult);
        updateExchangeAvailability();

        // –ó–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ (–∑–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π API endpoint)
        fetch('http://example.com/api/get_rates')
            .then(response => response.json())
            .then(data => {
                console.log('Received rates:', data);
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
                // updateExchangeRates(data);
            })
            .catch(error => console.error('Error:', error));
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞–ª—é—Ç
    function updateCurrencyDisplay() {
        const fromCurrency = getCurrencyInfo(currentFromCurrency);
        const toCurrency = getCurrencyInfo(currentToCurrency);

        document.getElementById('fromCurrencyLabel').textContent = fromCurrency.shortName;
        document.getElementById('toCurrencyLabel').textContent = toCurrency.shortName;

        document.getElementById('fromCurrency').innerHTML = getCurrencyHTML(fromCurrency);
        document.getElementById('toCurrency').innerHTML = getCurrencyHTML(toCurrency);

        document.getElementById('fromCurrencyInfo').textContent = getAdditionalInfo(fromCurrency);
        document.getElementById('toCurrencyInfo').textContent = getAdditionalInfo(toCurrency);
    }

    function getCurrencyHTML(currency) {
        return `
        <div class="currency-logo">${currency.logo}</div>
        <span>${currency.shortName}</span>
    `;
    }

    function getAdditionalInfo(currency) {
        if (currency.type === 'crypto') {
            return '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞';
        } else if (currency.type === 'bank') {
            return '–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ';
        } else if (currency.type === 'cash') {
            return currency.city ? `–ù–∞–ª–∏—á–Ω—ã–µ (${currency.city})` : '–ù–∞–ª–∏—á–Ω—ã–µ';
        }
        return '';
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∞–ª—é—Ç–µ
    function getCurrencyInfo(code) {
        return currencies.find(c => c.code === code);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –æ–±–º–µ–Ω–∞
    function updateExchangeRate() {
        const rate = getExchangeRate(currentFromCurrency, currentToCurrency);
        const toCurrency = getCurrencyInfo(currentToCurrency);
        document.getElementById('currentRate').textContent = `${rate.toFixed(2)} ${toCurrency.symbol}`;
        document.getElementById('currentRate').classList.add('pulse');
        setTimeout(() => {
            document.getElementById('currentRate').classList.remove('pulse');
        }, 1000);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–±–º–µ–Ω–∞
    function updateResult() {
        let fromAmount = parseFloat(document.getElementById('fromAmount').value);
        let toAmountInput = document.getElementById('toAmount');
        let minimumAmountMessage = document.getElementById('minimumAmountMessage');
        let fromCurrency = getCurrencyInfo(currentFromCurrency);

        if (fromAmount && !isNaN(fromAmount)) {
            let rate = getExchangeRate(currentFromCurrency, currentToCurrency);
            let toCurrency = getCurrencyInfo(currentToCurrency);
            let toAmount = (fromAmount * rate).toFixed(toCurrency.decimals);
            toAmountInput.value = toAmount;

            if (fromAmount < fromCurrency.minAmount) {
                minimumAmountMessage.textContent = `–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ - ${fromCurrency.minAmount} ${fromCurrency.shortName}`;
                tg.MainButton.hide();
            } else {
                minimumAmountMessage.textContent = '';
                updateExchangeAvailability();
            }
        } else {
            toAmountInput.value = '';
            minimumAmountMessage.textContent = '';
            tg.MainButton.hide();
        }
    }

    // –û–±–º–µ–Ω –≤–∞–ª—é—Ç
    function swapCurrencies() {
        [currentFromCurrency, currentToCurrency] = [currentToCurrency, currentFromCurrency];
        updateCurrencyDisplay();
        updateExchangeRate();
        let fromAmount = document.getElementById('fromAmount');
        let toAmount = document.getElementById('toAmount');
        [fromAmount.value, toAmount.value] = [toAmount.value, fromAmount.value];
        updateResult();
        updateExchangeAvailability();

        document.querySelector('.swap-button').classList.add('rotate');
        setTimeout(() => {
            document.querySelector('.swap-button').classList.remove('rotate');
        }, 300);
    }

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ –≤–∞–ª—é—Ç—ã
    function openCurrencyModal(type) {
        document.getElementById('currencyModal').style.display = 'block';
        setTimeout(() => {
            document.getElementById('currencyModal').classList.add('show');
        }, 10);
        filterCurrencies('all', type);
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ –≤–∞–ª—é—Ç—ã
    function closeCurrencyModal() {
        document.getElementById('currencyModal').classList.remove('show');
        setTimeout(() => {
            document.getElementById('currencyModal').style.display = 'none';
        }, 300);
    }

    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∞–ª—é—Ç
    function filterCurrencies(filter, type) {
        const buttons = document.querySelectorAll('.filter-button');
        buttons.forEach(button => button.classList.remove('active'));
        event.target.classList.add('active');

        const filteredCurrencies = filter === 'all' ? currencies : currencies.filter(c => c.type === filter);
        const currencyList = document.getElementById('currencyList');
        currencyList.innerHTML = '';

        filteredCurrencies.forEach(currency => {
            if (currency.code === (type === 'from' ? currentToCurrency : currentFromCurrency)) {
                return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∞–ª—é—Ç—É
            }
            const item = document.createElement('div');
            item.className = 'currency-item';
            item.innerHTML = `
            <div class="currency-label">
                <span class="currency-logo">${currency.logo}</span>
                <span class="currency-tech-name">${currency.code}</span>
            </div>
            <div class="currency-name">${currency.name}</div>
        `;
            item.onclick = () => selectCurrency(currency.code, type);
            currencyList.appendChild(item);
        });
    }

    // –í—ã–±–æ—Ä –≤–∞–ª—é—Ç—ã
    function selectCurrency(code, type) {
        if (type === 'from') {
            currentFromCurrency = code;
        } else {
            currentToCurrency = code;
        }
        updateCurrencyDisplay();
        updateExchangeRate();
        closeCurrencyModal();
        updateResult();
        updateExchangeAvailability();
    }

    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–º–µ–Ω–∞
    function exchange() {
        let fromAmount = parseFloat(document.getElementById('fromAmount').value);
        let toAmount = parseFloat(document.getElementById('toAmount').value);
        let managerCheck = document.getElementById('managerCheck').checked;

        if (fromAmount && !isNaN(fromAmount)) {
            let fromCurrency = getCurrencyInfo(currentFromCurrency);
            let toCurrency = getCurrencyInfo(currentToCurrency);
            let data = JSON.stringify({
                from: {
                    currency: fromCurrency.shortName,
                    amount: fromAmount
                },
                to: {
                    currency: toCurrency.shortName,
                    amount: toAmount
                },
                rate: getExchangeRate(currentFromCurrency, currentToCurrency),
                managerCheck: managerCheck
            });
            tg.sendData(data);
            tg.close();
        } else {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É –¥–ª—è –æ–±–º–µ–Ω–∞');
        }
    }

    function isCashToCash() {
        const fromCurrency = getCurrencyInfo(currentFromCurrency);
        const toCurrency = getCurrencyInfo(currentToCurrency);
        return fromCurrency.type === 'cash' && toCurrency.type === 'cash';
    }

    function isPremiumUser() {
        return tg.initDataUnsafe?.user?.is_premium || false;
    }

    function updateExchangeAvailability() {
        const cashToCash = isCashToCash();
        const premium = isPremiumUser();
        const fromAmount = parseFloat(document.getElementById('fromAmount').value);
        const fromCurrency = getCurrencyInfo(currentFromCurrency);

        if (cashToCash && !premium) {
            tg.MainButton.setParams({
                text: "–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Premium —é–∑–µ—Ä–æ–≤",
                color: "#E0E0E0",
                text_color: "#000000",
                is_active: false
            });
        } else if (fromAmount < fromCurrency.minAmount) {
            tg.MainButton.setParams({
                text: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞",
                color: "#E0E0E0",
                text_color: "#000000",
                is_active: false
            });
        } else {
            tg.MainButton.setParams({
                text: "–û–±–º–µ–Ω—è—Ç—å",
                color: "#2F9535",
                text_color: "#FFFFFF",
                is_active: true
            });
        }
    }


    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', initApp);

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
    document.addEventListener('click', function (event) {
        const inputElements = ['fromAmount', 'toAmount'];
        if (!inputElements.includes(event.target.id)) {
            document.activeElement.blur(); // –°–Ω–∏–º–∞–µ–º —Ñ–æ–∫—É—Å —Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É)
        }
    });
</script>

</html>